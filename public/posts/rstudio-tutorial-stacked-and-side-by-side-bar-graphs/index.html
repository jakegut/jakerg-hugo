<!doctype html><html lang=en><head><title>RStudio Tutorial: Stacked and Side-by-Side Bar Graphs &#183; Jake Gutierrez</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.74.3"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href=https://jakegut.com/css/normalize.css><link rel=stylesheet href=https://jakegut.com/css/skeleton.css><link rel=stylesheet href=https://jakegut.com/css/jake.css><link rel=stylesheet href=https://jakegut.com/css/syntax.css><link href="https://fonts.googleapis.com/css2?family=Anonymous+Pro&family=Lato&family=Montserrat&display=swap" rel=stylesheet></head><body><div class=wrapper><div class=container><div class=row><div class="twelve columns"><div class=header><h3><a href=https://jakegut.com/>Jake Gutierrez</a></h3><ul class=header><li><a href=https://jakegut.com/posts>/posts</a></li><li><a href=https://jakegut.com/projects>/projects</a></li><li><a href=https://jakegut.com/resume.pdf>/resume</a></li></ul></div></div></div><div class=row><div class="twelve columns"><h1>RStudio Tutorial: Stacked and Side-by-Side Bar Graphs</h1><h5 class=post-date>Posted Mar 27, 2019</h5><div class=post-content><p>This tutorial will go over how to create stacked and side-by-side bar charts in RStudio with ggplot.</p><p>To get started, make sure you have ggplot installed using</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>install.packages</span>(<span style=color:#e6db74>&#34;tidyverse&#34;</span>)
</code></pre></div><p><code>tidyverse</code> contains multiple different packages including ggplot.</p><p>Next, we&rsquo;ll import the data set and include <code>tidverse</code> like so:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>library</span>(<span style=color:#e6db74>&#34;tidyverse&#34;</span>)

<span style=color:#75715e># The path of the file will depend on your machine, make sure it&#39;s changed</span>
<span style=color:#75715e># accordingly</span>
movies <span style=color:#f92672>=</span> <span style=color:#a6e22e>read.csv</span>(<span style=color:#e6db74>&#34;D:/Intro to Stats/Movies_06-15txt.csv&#34;</span>)
</code></pre></div><p>And make a basic bar graph:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>ggplot</span>(movies, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> MPAA)) <span style=color:#f92672>+</span> 
  <span style=color:#a6e22e>geom_bar</span>()
</code></pre></div><p><img src=/images/bargraph_1.png alt=null></p><p>We can now display more variables my adding an additional argument to <code>aes()</code> in the <code>ggplot()</code> function. To display an additional variable, specify the <code>fill</code> argument making it equal to a name of a categorical variable in your data set.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>ggplot</span>(movies, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> MPAA, fill <span style=color:#f92672>=</span> Genre)) <span style=color:#f92672>+</span> 
  <span style=color:#a6e22e>geom_bar</span>()
</code></pre></div><p><img src=/images/bargraph_2.png alt=null></p><p>By default, ggplot will display it as a stacked bar graph. To get the bars to display side-by-side, we&rsquo;ll add an argument to <code>geom_bar()</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>ggplot</span>(movies, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> MPAA, fill <span style=color:#f92672>=</span> Genre)) <span style=color:#f92672>+</span> 
  <span style=color:#a6e22e>geom_bar</span>(position <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;dodge&#34;</span>)
</code></pre></div><p><img src=/images/bargraph_3.png alt=null></p><p>By specifying the position argument, we can change the position of the individual bars. For &ldquo;dodge&rdquo;, think of it as the bars are dodging each other to reach the x-axis of the graph.</p><p>Looking at your previous graphs, you can see that the &ldquo;NC-17&rdquo; rating is hard to see, and it looks like there are more than just Drama movies in the side-by-side graph. To fix this, we can display the bars as percentages rather than just counts. We can change the position argument:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>ggplot</span>(movies, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> MPAA, fill <span style=color:#f92672>=</span> Genre)) <span style=color:#f92672>+</span> 
  <span style=color:#a6e22e>geom_bar</span>(position <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;fill&#34;</span>)
</code></pre></div><p><img src=/images/bargraph_4.png alt=null></p><p>By changing position equal to &ldquo;fill&rdquo;, we can see that bars &ldquo;fill&rdquo; up their column. We can now see that NC-17 includes Horror films as well as Drama films. On the y-axis, you can see that the percentages are represented by decimals rather than percents. We can fix this by adding an additional function:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>ggplot</span>(movies, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> MPAA, fill <span style=color:#f92672>=</span> Genre)) <span style=color:#f92672>+</span> 
  <span style=color:#a6e22e>geom_bar</span>(position <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;fill&#34;</span>) <span style=color:#f92672>+</span> 
  <span style=color:#75715e># Change the y scale to percent</span>
  <span style=color:#a6e22e>scale_y_continuous</span>(labels <span style=color:#f92672>=</span> scales<span style=color:#f92672>::</span>percent) <span style=color:#f92672>+</span> 
  <span style=color:#75715e># Change the y label</span>
  <span style=color:#a6e22e>ylab</span>(<span style=color:#e6db74>&#34;Percent&#34;</span>)
</code></pre></div><p><img src=/images/bargraph_5.png alt=null></p></div><div class=post-comments></div></div></div></div><footer class=text-centered><p>Copyright &copy; 2020 Jake Gutierrez</p></footer></div></body></html>